# Тестовое задание 

Задания направлены на проверку ваших текущих навыков, умение быстро обучаться и гуглить. 
При проверке будут оцениваться чистота кода, использование принятых в отрасли стандартов и выполнение условий задачи. Выполненное тестовое задание будет использоваться в ходе собеседования. 
Выложите готовое задание в свой гитхаб-репозиторий и пришлите нам ссылку на него. 

Ждём ваше выполненное задание в течение 7 - 10 дней после получения ссылки.

---

## Frontend-модуль

Сверстайте лендинг по [макету](https://www.figma.com/file/fY6qxsy8UQ6nUxDN1yMpDQ/School-Recover---html-website-template-for-school-(Community)-(Copy)-(Copy)?node-id=2415%3A26437). 

Используйте Bootstrap, мы применяем его в работе. PixelPerfect не требуется. 
Адаптация страницы под 3-4 разрешения будет вам плюсом 🙂

Подключите в своём репозитории Github Pages, чтобы можно было посмотреть как саму страницу, так и код проекта.

---

## Backend-модуль

### Описание модели данных

Есть схема базы данных для сайта объявлений, похожего на Avito, со следующими сущностями:

1. Пользователи (users): 
    - регистрируются на сайте, 
    - у одного пользователя может быть много или ни одного объявления,
    - комментируют объявления других пользователей.

1. Категории (categories): 
    - типы, по которым группируются объявления.

1. Объявления (offers):
    - относятся к одной или большему количеству категорий,
    - тип объявления (offer_type) может быть либо 'buy' (Куплю), либо 'sell' (Продам); 

1. Комментарии (comments):  
    - одноуровневые, т.е. пользователи не могут комментировать комментарии других пользователей.

*Схема сущностей базы данных*:

![схемаБД](img/image4.png)

По предложенной диаграмме напишите SQL-запросы.

> Выполнение всех запросов не обязательно, сделайте столько, сколько сможете, но чем больше вы сделаете, тем лучше.
> Задачи разработаны для среды PostgreSQL.
> Важны именно сами запросы, даже демонстрация хода мыслей.

### Обязательная часть

#### Задание 1

Выберите список всех комментариев, созданных пользователем с идентификатором 1. 
Поля для вывода: id, created_at, offer_id, comment_text.

#### Задание 2

Выведите список объявлений (id, created_at, user_id, offer_type, title, price, picture), 
опубликованных в октябре 2021 года с сортировкой по дате публикации от самых свежих к более поздним. 
Дату публикации выведите в формате 'DD.MM.YYYY'.

#### Задание 3

Выберите список пользователей, которые ещё не опубликовали ни одного объявления. 
Поля для вывода: идентификатор пользователя, email, дата регистрации, имя и фамилия одной строкой как столбец 'user_name'. Отсортируйте по возрастанию даты регистрации.

#### Задание 4

Выберите среди всех объявлений на продажу самые дорогие товары, количество ограничивать не нужно.
Выведите их идентификатор, имя и фамилию автора, заголовок и цену продажи. 

#### Задание 5

Для вывода на сайте выберите список всех категорий, в которых есть хотя бы одно объявление с указанием количества объявлений по каждой категории. Выведите id категории, title, slug, количество объявлений (offer_amount).

### Хардкор-задания для уверенных пользователей SQL

Выполнение необязательно, но покажет уровень ваших знаний. Чем больше заданий вы выполните, тем лучше.

#### Задание 6

Выберите список объявлений, относящихся к категории 'Дом'. 
Поля: название категории (category_name) и данные объявления (id, created_at, user_id, title, price). 
Список категорий для объявлений выводить не нужно.
Выведите следующие 4 объявления после первых 4.

#### Задание 7

Выведите объявления (id, title, user_id, offer_type, price) со всеми категориями, к которым оно относится, собранными в одну строку, например: 'Спорт, Развлечения, Дети'. 
Назовите этот столбец categories. 
Отсортируйте по убыванию цены. 
Выведите названия типов объявлений на русском: если тип buy, то нужно вывести 'Куплю', если sell - 'Продам', соответственно.

#### Задание 8

Выведите список пользователей (id, first_name, last_name, email), количество объявлений, созданных ими (offer_amount), и количество комментариев под этими объявлениями (comments_amount). 
Результат отсортируйте по убыванию offer_amount.

#### Задание 9

Реализуйте запрос поиска: 
Выберите все объявления с типом 'Куплю' ('buy') в категории 'Животные', в заголовке которых есть слова 'кролик' и 'гараж' одновременно. Полный текст объявления обрежьте до 30 символов, добавьте к полученной строке '...' и назовите announce. Отберите объявления с ценой менее 50000.
Поля для вывода: идентификатор объявления, тип, категория, автор (имя, фамилия), заголовок, анонс, стоимость.

#### Задание 10

Напишите запрос, который по массиву идентификаторов категорий соберёт массив названий соответствующих категорий. 
Пример: на входе массив `ARRAY[1, 2, 5, 7]`, на выходе массив строк: `{Вещи,Дома,Услуги,Машины}`:

![пример2](img/image2.png)

#### Задание 11

Соберите мини-отчёт: реализуйте выборку количества объявлений по месяцам 2021 года. 
Поля для вывода: year, monthname, offers_amount. 
Отсортируйте отчёт по месяцам по возрастанию.  

#### Задание 12

Реализуйте запрос из пункта 6 с добавлением нарастающего итога по месяцам. 
Те же столбцы + столбец offers_sum.

#### Задание 13

Соберите jsonb-массив всех комментариев для объявления с id 7. 
Каждый комментарий должен быть представлен jsonb-объектом со следующими данными: id комментария, текст, дата создания, id пользователя, создавшего комментарий, фамилия и имя одной строкой, ссылка на аватар.

Пример вывода:

![пример1](img/image1.png)

Или в развёрнутом виде:

![пример3](img/image3.png)

#### Задание 14

Создайте pl/pgsql-функцию, выполняющую запрос из п. 9.
Функция должна принимать набор параметров-фильтров для поиска.
Функция должна возвращать набор строк: список объявлений, соответствующих фильтрам.

> Количество реализованных запросов покажет ваш уровень владения SQL.
> Результат выполнения задания соберите в файл, для каждого запроса укажите номер и текст описания задачи, 
> и выложите в гитхаб. 